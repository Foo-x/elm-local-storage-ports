#!/usr/bin/env node

var fs = require("./fs-util");

process.title = "elm-localstorage-ports";

if (process.argv[2] !== "init") {
  console.error("\nIntended use of elm-localstorage-ports is: `elm-localstorage-ports init`\n");
  process.exit(1);
}

var stdin = process.openStdin();

stdin.addListener("data", function(d) {
  if (d.toString().trim().toLowerCase() === "y") {
    copyFiles();
  } else {
    console.log("Exiting.");
    console.log("Type `y` next time to copy the files.\n");
    process.exit();
  }
});

console.log("\nAre you inside one of the \"source-directories\" from your project's elm-package.json? (y/n)");

function copyFiles() {
  console.log("\nCopying ports file from the current directory.\n");
  fs.ensureDirectory("Ports");
  fs.copyFile("Ports/LocalStorage.elm");
  console.log("");
  process.exit();
}
